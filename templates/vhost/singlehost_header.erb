# File Managed by Puppet

server {
  listen <%= @listen_ip %><% if @real_listen_port %>:<%= @real_listen_port %><% end %><% if @default_server == 'true' %> default_server<% end %>;
  <% # check to see if ipv6 support exists in the kernel before applying %>
  <% if @ipv6_enable == 'true' && (defined? @ipaddress6) %>listen [<%= @ipv6_listen_ip %>]:<%= @real_ipv6_listen_port %> default ipv6only=on;<% end %>
  server_name <%= @real_server_name %>;
  access_log  <%= scope.lookupvar('nginx::log_dir')%>/<%= @name %>.access.log;

<% # SSL Settings %>
<% if @ssl == 'present' -%>
  ssl on;
  ssl_certificate      <%= @ssl_cert %>;
  ssl_certificate_key  <%= @ssl_key %>;
<% end -%>